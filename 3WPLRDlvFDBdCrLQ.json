{"updatedAt":"2025-08-21T17:19:56.805Z","createdAt":"2025-08-21T17:12:09.506Z","id":"3WPLRDlvFDBdCrLQ","name":"4Tool-Analise_comparativa","active":true,"isArchived":false,"nodes":[{"parameters":{"promptType":"define","text":"={{ $json.chatInput }}","options":{"systemMessage":"=<name>\nAn√°lise de An√∫ncios: Per√≠odo Din√¢mico\n</name>\n\n<description>\nCompara m√©tricas de an√∫ncios entre dois per√≠odos din√¢micos fornecidos pelo usu√°rio, destacando varia√ß√µes percentuais com linguagem clara e formatada para WhatsApp.\n</description>\n\n<role>\nSou um gestor de tr√°fego especializado em an√∫ncios online, respons√°vel por gerar an√°lises comparativas entre dois per√≠odos de campanhas com base nos dados recebidos.\n</role>\n\n<goal>\nAnalisar e comparar os dados de dois per√≠odos fornecidos, destacando as principais diferen√ßas de performance por m√©trica, sempre com varia√ß√£o percentual, linguagem objetiva e estrutura clara.\n</goal>\n\n<instructions>\n- Os dados sempre vir√£o em dois blocos distintos, iniciando com os marcadores:\n  üëâ Per√≠odo Atual: [data]  \n  üëâ Per√≠odo Anterior: [data]\n\n- Considere tudo abaixo de cada t√≠tulo at√© o pr√≥ximo marcador como pertencente √†quele per√≠odo.\n\n- As m√©tricas s√£o listadas como `Nome da m√©trica: valor`, e podem incluir:\n  Impress√µes, Alcance, Cliques, Gasto, Compras em loja, Adi√ß√µes ao carrinho, Inicia√ß√£o de checkout, Engajamentos na p√°gina, Visualiza√ß√µes de landing page.\n\n- Sempre que uma m√©trica estiver ausente em um dos per√≠odos, considere o valor como `0` para garantir a consist√™ncia da compara√ß√£o.\n\n- Compare os dados de ambos os per√≠odos e destaque a varia√ß√£o percentual de cada m√©trica.\n\n- Comece o texto informando qual √© o **per√≠odo atual** e o **per√≠odo anterior**, com as datas no formato dd/mm.\n\n- Utilize SEMPRE o s√≠mbolo \"‚ûù\" para iniciar cada ponto de an√°lise.\n\n- NUNCA use os seguintes termos: incremento, impressionante, descida, observamos, robusto, sugerindo, efic√°cia, Observa-se, sugere, decl√≠nio, problem√°tica, refletindo, experimentou, revelando, resson√¢ncia.\n\n- SEMPRE substitua a express√£o ‚ÄúCom um aumento no investimento‚Äù por ‚ÄúAumentamos o investimento‚Äù.\n\n- Destaque em cada ponto a **varia√ß√£o percentual** (positiva ou negativa) entre os dois per√≠odos.\n\n- Estrutura recomendada por m√©trica (ajuste conforme os dados recebidos):\n  ‚ûù *As vendas* cresceram X%, resultando em X vendas adicionais.  \n  ‚ûù *O CTR* subiu X%, indicando maior interesse nos an√∫ncios.  \n  ‚ûù *Aumentamos o investimento* em X%, o que gerou Y% a mais em vendas.  \n  ‚ûù *O ROAS* caiu X%, exigindo aten√ß√£o na efici√™ncia do investimento.\n\n- Quando houver m√∫ltiplas m√©tricas, mantenha a ordem l√≥gica: Investimento ‚Üí Impress√µes ‚Üí Cliques ‚Üí Convers√µes ‚Üí ROAS ‚Üí M√©tricas t√©cnicas (ex: tempo de carregamento).\n\n- Formata√ß√£o compat√≠vel com WhatsApp:\n  - Use `*negrito*` para destacar nomes de m√©tricas\n  - Use quebra de linha para separar os t√≥picos\n  - Evite blocos longos e par√°grafos densos\n\n- Se receber apenas um dos blocos ou n√£o conseguir identificar as m√©tricas em ambos, retorne:\n  \"*Dados insuficientes para an√°lise comparativa. Verifique se os dois per√≠odos foram corretamente informados.*\"\n\n- Sempre envie os inputs no formato de texto plano (string), mesmo que esteja lidando com dados estruturados. Converta objetos em string se necess√°rio.\n\n</instructions>\n\nHoje √©: {{(() => {\n  const date = new Date(); // Pega o hor√°rio atual do servidor\n  return new Intl.DateTimeFormat('pt-BR', {\n    timeZone: 'America/Sao_Paulo',\n    day: '2-digit',\n    month: '2-digit',\n    year: 'numeric',\n    hour: '2-digit',\n    minute: '2-digit',\n    hour12: false\n  }).format(date);\n})()}}\n"}},"type":"@n8n/n8n-nodes-langchain.agent","typeVersion":1.9,"position":[608,32],"id":"a4568506-ab15-44d6-849b-1226d0a09527","name":"Analise_comparativa"},{"parameters":{},"type":"@n8n/n8n-nodes-langchain.toolCalculator","typeVersion":1,"position":[752,240],"id":"1868a801-e3b8-43e7-85bd-93b24798bdba","name":"Calculator"},{"parameters":{},"type":"@n8n/n8n-nodes-langchain.toolThink","typeVersion":1,"position":[880,240],"id":"e2195747-3d75-4352-a083-d481ef740b84","name":"Think"},{"parameters":{"model":{"__rl":true,"mode":"list","value":"gpt-4o-mini"},"options":{}},"type":"@n8n/n8n-nodes-langchain.lmChatOpenAi","typeVersion":1.2,"position":[512,240],"id":"0faa39ef-ba5d-442b-b1a5-51722ced9d48","name":"GPT 4o mini","credentials":{"openAiApi":{"id":"4QN0fwxyuHPXwljS","name":"OpenAI - Alvorada Davi"}}},{"parameters":{"workflowInputs":{"values":[{"name":"sessionId"},{"name":"chatInput"}]}},"type":"n8n-nodes-base.executeWorkflowTrigger","typeVersion":1.1,"position":[288,-80],"id":"df657f10-f0ec-4195-829f-48516aa2d2b1","name":"When Executed by Another Workflow"},{"parameters":{"sessionIdType":"customKey","sessionKey":"={{ $json.sessionId }}","contextWindowLength":0},"type":"@n8n/n8n-nodes-langchain.memoryBufferWindow","typeVersion":1.3,"position":[640,240],"id":"09d84b6e-e1ed-4782-9515-840815c59061","name":"Simple Memory"},{"parameters":{"public":true,"mode":"webhook","options":{}},"type":"@n8n/n8n-nodes-langchain.chatTrigger","typeVersion":1.1,"position":[288,112],"id":"87c3f5f2-ae14-4c7f-ad0f-d971babedc9f","name":"When chat message received","webhookId":"80cfc32d-cbd3-4bf3-9270-ab51299a0bdf","disabled":true}],"connections":{"Calculator":{"ai_tool":[[{"node":"Analise_comparativa","type":"ai_tool","index":0}]]},"Think":{"ai_tool":[[{"node":"Analise_comparativa","type":"ai_tool","index":0}]]},"GPT 4o mini":{"ai_languageModel":[[{"node":"Analise_comparativa","type":"ai_languageModel","index":0}]]},"When Executed by Another Workflow":{"main":[[{"node":"Analise_comparativa","type":"main","index":0}]]},"Simple Memory":{"ai_memory":[[{"node":"Analise_comparativa","type":"ai_memory","index":0}]]},"When chat message received":{"main":[[{"node":"Analise_comparativa","type":"main","index":0}]]}},"settings":{"executionOrder":"v1"},"staticData":null,"meta":{"templateCredsSetupCompleted":true},"pinData":{},"versionId":"24908171-db54-4f77-abe5-4473f2dfa02f","activeVersionId":"24908171-db54-4f77-abe5-4473f2dfa02f","triggerCount":0,"shared":[{"updatedAt":"2025-08-21T17:12:09.506Z","createdAt":"2025-08-21T17:12:09.506Z","role":"workflow:owner","workflowId":"3WPLRDlvFDBdCrLQ","projectId":"HA3MdmBHnbWmZ1v9"}],"activeVersion":{"updatedAt":"2026-01-08T20:13:28.785Z","createdAt":"2026-01-08T20:13:28.785Z","versionId":"24908171-db54-4f77-abe5-4473f2dfa02f","workflowId":"3WPLRDlvFDBdCrLQ","nodes":[{"parameters":{"promptType":"define","text":"={{ $json.chatInput }}","options":{"systemMessage":"=<name>\nAn√°lise de An√∫ncios: Per√≠odo Din√¢mico\n</name>\n\n<description>\nCompara m√©tricas de an√∫ncios entre dois per√≠odos din√¢micos fornecidos pelo usu√°rio, destacando varia√ß√µes percentuais com linguagem clara e formatada para WhatsApp.\n</description>\n\n<role>\nSou um gestor de tr√°fego especializado em an√∫ncios online, respons√°vel por gerar an√°lises comparativas entre dois per√≠odos de campanhas com base nos dados recebidos.\n</role>\n\n<goal>\nAnalisar e comparar os dados de dois per√≠odos fornecidos, destacando as principais diferen√ßas de performance por m√©trica, sempre com varia√ß√£o percentual, linguagem objetiva e estrutura clara.\n</goal>\n\n<instructions>\n- Os dados sempre vir√£o em dois blocos distintos, iniciando com os marcadores:\n  üëâ Per√≠odo Atual: [data]  \n  üëâ Per√≠odo Anterior: [data]\n\n- Considere tudo abaixo de cada t√≠tulo at√© o pr√≥ximo marcador como pertencente √†quele per√≠odo.\n\n- As m√©tricas s√£o listadas como `Nome da m√©trica: valor`, e podem incluir:\n  Impress√µes, Alcance, Cliques, Gasto, Compras em loja, Adi√ß√µes ao carrinho, Inicia√ß√£o de checkout, Engajamentos na p√°gina, Visualiza√ß√µes de landing page.\n\n- Sempre que uma m√©trica estiver ausente em um dos per√≠odos, considere o valor como `0` para garantir a consist√™ncia da compara√ß√£o.\n\n- Compare os dados de ambos os per√≠odos e destaque a varia√ß√£o percentual de cada m√©trica.\n\n- Comece o texto informando qual √© o **per√≠odo atual** e o **per√≠odo anterior**, com as datas no formato dd/mm.\n\n- Utilize SEMPRE o s√≠mbolo \"‚ûù\" para iniciar cada ponto de an√°lise.\n\n- NUNCA use os seguintes termos: incremento, impressionante, descida, observamos, robusto, sugerindo, efic√°cia, Observa-se, sugere, decl√≠nio, problem√°tica, refletindo, experimentou, revelando, resson√¢ncia.\n\n- SEMPRE substitua a express√£o ‚ÄúCom um aumento no investimento‚Äù por ‚ÄúAumentamos o investimento‚Äù.\n\n- Destaque em cada ponto a **varia√ß√£o percentual** (positiva ou negativa) entre os dois per√≠odos.\n\n- Estrutura recomendada por m√©trica (ajuste conforme os dados recebidos):\n  ‚ûù *As vendas* cresceram X%, resultando em X vendas adicionais.  \n  ‚ûù *O CTR* subiu X%, indicando maior interesse nos an√∫ncios.  \n  ‚ûù *Aumentamos o investimento* em X%, o que gerou Y% a mais em vendas.  \n  ‚ûù *O ROAS* caiu X%, exigindo aten√ß√£o na efici√™ncia do investimento.\n\n- Quando houver m√∫ltiplas m√©tricas, mantenha a ordem l√≥gica: Investimento ‚Üí Impress√µes ‚Üí Cliques ‚Üí Convers√µes ‚Üí ROAS ‚Üí M√©tricas t√©cnicas (ex: tempo de carregamento).\n\n- Formata√ß√£o compat√≠vel com WhatsApp:\n  - Use `*negrito*` para destacar nomes de m√©tricas\n  - Use quebra de linha para separar os t√≥picos\n  - Evite blocos longos e par√°grafos densos\n\n- Se receber apenas um dos blocos ou n√£o conseguir identificar as m√©tricas em ambos, retorne:\n  \"*Dados insuficientes para an√°lise comparativa. Verifique se os dois per√≠odos foram corretamente informados.*\"\n\n- Sempre envie os inputs no formato de texto plano (string), mesmo que esteja lidando com dados estruturados. Converta objetos em string se necess√°rio.\n\n</instructions>\n\nHoje √©: {{(() => {\n  const date = new Date(); // Pega o hor√°rio atual do servidor\n  return new Intl.DateTimeFormat('pt-BR', {\n    timeZone: 'America/Sao_Paulo',\n    day: '2-digit',\n    month: '2-digit',\n    year: 'numeric',\n    hour: '2-digit',\n    minute: '2-digit',\n    hour12: false\n  }).format(date);\n})()}}\n"}},"type":"@n8n/n8n-nodes-langchain.agent","typeVersion":1.9,"position":[608,32],"id":"a4568506-ab15-44d6-849b-1226d0a09527","name":"Analise_comparativa"},{"parameters":{},"type":"@n8n/n8n-nodes-langchain.toolCalculator","typeVersion":1,"position":[752,240],"id":"1868a801-e3b8-43e7-85bd-93b24798bdba","name":"Calculator"},{"parameters":{},"type":"@n8n/n8n-nodes-langchain.toolThink","typeVersion":1,"position":[880,240],"id":"e2195747-3d75-4352-a083-d481ef740b84","name":"Think"},{"parameters":{"model":{"__rl":true,"mode":"list","value":"gpt-4o-mini"},"options":{}},"type":"@n8n/n8n-nodes-langchain.lmChatOpenAi","typeVersion":1.2,"position":[512,240],"id":"0faa39ef-ba5d-442b-b1a5-51722ced9d48","name":"GPT 4o mini","credentials":{"openAiApi":{"id":"4QN0fwxyuHPXwljS","name":"OpenAI - Alvorada Davi"}}},{"parameters":{"workflowInputs":{"values":[{"name":"sessionId"},{"name":"chatInput"}]}},"type":"n8n-nodes-base.executeWorkflowTrigger","typeVersion":1.1,"position":[288,-80],"id":"df657f10-f0ec-4195-829f-48516aa2d2b1","name":"When Executed by Another Workflow"},{"parameters":{"sessionIdType":"customKey","sessionKey":"={{ $json.sessionId }}","contextWindowLength":0},"type":"@n8n/n8n-nodes-langchain.memoryBufferWindow","typeVersion":1.3,"position":[640,240],"id":"09d84b6e-e1ed-4782-9515-840815c59061","name":"Simple Memory"},{"parameters":{"public":true,"mode":"webhook","options":{}},"type":"@n8n/n8n-nodes-langchain.chatTrigger","typeVersion":1.1,"position":[288,112],"id":"87c3f5f2-ae14-4c7f-ad0f-d971babedc9f","name":"When chat message received","webhookId":"80cfc32d-cbd3-4bf3-9270-ab51299a0bdf","disabled":true}],"connections":{"Calculator":{"ai_tool":[[{"node":"Analise_comparativa","type":"ai_tool","index":0}]]},"Think":{"ai_tool":[[{"node":"Analise_comparativa","type":"ai_tool","index":0}]]},"GPT 4o mini":{"ai_languageModel":[[{"node":"Analise_comparativa","type":"ai_languageModel","index":0}]]},"When Executed by Another Workflow":{"main":[[{"node":"Analise_comparativa","type":"main","index":0}]]},"Simple Memory":{"ai_memory":[[{"node":"Analise_comparativa","type":"ai_memory","index":0}]]},"When chat message received":{"main":[[{"node":"Analise_comparativa","type":"main","index":0}]]}},"authors":"system migration","name":null,"description":null,"autosaved":false},"tags":[]}